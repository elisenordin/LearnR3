---
title: "Draft R Markdown document"
author: "Your Name"
format: html
---

```{r setup}
library(tidyverse)
library(fs) # file syastem
library(vroom)
library(here)
options(dplyr.summarise.inform = FALSE)

source(here::here("R/functions.R"))
```


## Importing all user info data
```{r}
user_info_df <- import_multiple_files(
  "user_info.csv",
  import_user_info
)

saliva_df <- import_multiple_files(
  "saliva.csv",
  import_saliva
)

user_info_df %>%
  select(age)

user_info_df %>%
  select(where(is.numeric))

user_info_df %>%
  select(where(is.character))

saliva_df %>% summarise(
  cortisol_mean = mean(cortisol_norm),
  melatonin_mean = mean(melatonin_norm)
)
saliva_df %>% summarise(across(c(cortisol_norm, melatonin_norm), mean))

saliva_df %>% summarise(across(c(cortisol_norm, melatonin_norm), list(
    average = mean, 
    sd = sd)))
saliva_df %>% summarise(across(c(where(is.numeric)), list(mean = mean)))

names(list(mean = mean))


# across(c(age, weight), ~ mean(.x, na.rm = TRUE))
# across(c(age, weight), function(x) mean(x, na.rm = TRUE))
# across(c(age, weight), \(x) mean(x, na.rm = TRUE))
```


## Summarising R
```{r}
rr_df <- import_multiple_files("RR.csv", import_rr)
rr_df %>%
  group_by(file_path_id, day) %>%
  summarize(across(ibi_s), list(mean = ~ mean(.x, na.rm = TRUE)))


rr_df <- import_multiple_files("RR.csv", import_rr)
rr_df %>%
  group_by(file_path_id, day) %>%
  summarise(across(ibi_s, list(mean = mean)))

summarised_rr_df <- rr_df %>%
  group_by(file_path_id, day) %>%
  summarise(across(ibi_s, list(
    mean = ~ mean(.x, na.rm = TRUE),
    sd = ~ sd(.x, na.rm = TRUE)
  ))) %>%
  ungroup()
```


## Exercise: Summarise  Actigraph
```{r}
actigraph_df <- import_multiple_files("Actigraph.csv", import_actigraph)
summarised_actigraph_df <- actigraph_df %>%
  group_by(file_path_id, day) %>%
  # These statistics will probably be different for you
  summarise(across(c(hr,steps), list(
    mean = ~ mean(.x, na.rm = TRUE),
    sd = ~ sd(.x, na.rm = TRUE)
  ))) %>%
  ungroup()


```






